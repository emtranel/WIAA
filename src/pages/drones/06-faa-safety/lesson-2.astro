---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Sidebar from '../../../components/Sidebar.astro';
import LessonNav from '../../../components/LessonNav.astro';
const content = await import('../../../content/drones/06-faa-safety/lesson-2.md');
const { Content } = content;
const { title, chapter, lesson } = content.frontmatter;
---

<BaseLayout title={title}>
  <div class="container" style="max-width: 1400px; margin: 30px auto; padding: 0 20px;">
    <div style="display: grid; grid-template-columns: 250px 1fr; gap: 24px; align-items: start;">
      <Sidebar currentChapter={chapter} currentLesson={lesson} />
      <div class="content-area">
        <div class="content-header">
          <div class="page-header-bar">
            <div class="tab-buttons">
              <a href="/WIAA/drones" class="tab-btn active">Learning Module</a>
              <a href="/WIAA/drones/instructor" class="tab-btn">Instructor Resources</a>
            </div>
          </div>
          <p class="chapter-label">Chapter {chapter}: FAA Part 107 & safety</p>
          <h1>{title}</h1>
        </div>
        <article class="lesson-content">
          <p class="intro-text">When operating a drone, many regulations must be met to ensure safety of the operator and the drone. A few key requirements are listed below; however, a more comprehensive list is available from the Federal Aviation Administration.</p>

          <h2>10 Key Rules</h2>
          
          <div class="rules-timeline">
            <button class="rule-item" data-rule="1">
              <div class="rule-marker">
                <span class="rule-num">1</span>
              </div>
              <div class="rule-content">
                <h3>Keep Drone in Sight</h3>
                <p class="rule-description">You need to be able to see the drone the whole time when you are flying. Not too far away, and not on the other side of large objects.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="2">
              <div class="rule-marker">
                <span class="rule-num">2</span>
              </div>
              <div class="rule-content">
                <h3>Give Way to Planes</h3>
                <p class="rule-description">If you are flying and see another plane flying by, you are responsible for moving out of the way from the plane or any other flying aircraft. You do not have the right of way.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="3">
              <div class="rule-marker">
                <span class="rule-num">3</span>
              </div>
              <div class="rule-content">
                <h3>Fly One Drone at a Time</h3>
                <p class="rule-description">One person can only fly one drone. Two people cannot fly one drone, and one person cannot fly two drones.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="4">
              <div class="rule-marker">
                <span class="rule-num">4</span>
              </div>
              <div class="rule-content">
                <h3>No Reckless Flying</h3>
                <p class="rule-description">Do not fly recklessly. Just like operating a car, drones need to be flown carefully and purposefully.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="5">
              <div class="rule-marker">
                <span class="rule-num">5</span>
              </div>
              <div class="rule-content">
                <h3>Maximum Altitude</h3>
                <div class="rule-details">
                  <ul>
                    <li>Cannot fly higher than 400 feet above the ground</li>
                    <li>If you are flying above a building, you are allowed to fly 400 feet above the building</li>
                    <li>Regardless of if you are flying 400 feet above the ground or a building, you must be a minimum of 500 feet below the clouds and 2000 feet horizontally away from the clouds</li>
                  </ul>
                </div>
              </div>
            </button>

            <button class="rule-item" data-rule="6">
              <div class="rule-marker">
                <span class="rule-num">6</span>
              </div>
              <div class="rule-content">
                <h3>Maximum Speed</h3>
                <p class="rule-description">Do not exceed 100 miles per hour</p>
              </div>
            </button>

            <button class="rule-item" data-rule="7">
              <div class="rule-marker">
                <span class="rule-num">7</span>
              </div>
              <div class="rule-content">
                <h3>Flight Time</h3>
                <p class="rule-description">You may fly your drone for 30 minutes before the sunrise and 30 minutes after sunset during civil twilight. If you have specialized FAA approved lighting on the drone, then you may request exceptions to this regulation.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="8">
              <div class="rule-marker">
                <span class="rule-num">8</span>
              </div>
              <div class="rule-content">
                <h3>Maximum Distance Between Drone and Pilot</h3>
                <p class="rule-description">You must be able to always see the drone. Often you will lose sight of the drone before it is 3 miles away, in which case you should return the drone closer to a point you can see the drone.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="9">
              <div class="rule-marker">
                <span class="rule-num">9</span>
              </div>
              <div class="rule-content">
                <h3>Do Not Fly Over People</h3>
                <p class="rule-description">Do not fly over a group of people at a sporting event or a crowd of people in any other setting.</p>
              </div>
            </button>

            <button class="rule-item" data-rule="10">
              <div class="rule-marker">
                <span class="rule-num">10</span>
              </div>
              <div class="rule-content">
                <h3>Do Not Fly From Moving Vehicles</h3>
                <p class="rule-description">You are also not allowed to fly a drone when you are in a moving vehicle like a boat or a car unless you are in a sparsely populated area.</p>
              </div>
            </button>
          </div>

          <img src="/WIAA/images/safety.jpg" alt="Safety Regulations" />

          <h2>Airspace Classes</h2>
          <div class="airspace-info">
            <p>The FAA has established different regulated airspace classes. You are allowed to fly a drone within the previously discussed regulations in <strong>Class G Airspace</strong>. However, you can be allowed to fly in other restricted airspace classes by contacting the regulator of the airspace of interest.</p>
          </div>

          <h2>Learning Activities</h2>
          <ul class="activities-list">
            <li>Identify the rule violators exercise</li>
            <li>Part 107 Honorary Pilot's Exam</li>
          </ul>
        </article>
        <LessonNav 
          prev={{ href: '/drones/06-faa-safety/lesson-1', label: 'Previous' }}
          next={{ href: '/drones/06-faa-safety/review', label: 'Next' }}
          progress={`${chapter}.${lesson} / 7 Chapters`}
        />
      </div>
    </div>
  </div>
</BaseLayout>

<style is:global>
  :root {
    --isu-red: #c41e3a;
    --isu-gold: #f8c600;
    --text-primary: #1a1a1a;
    --text-secondary: #666666;
    --border-color: #e5e7eb;
  }

  .lesson-content .intro-text {
    font-size: 1.1em;
    line-height: 1.8;
    color: var(--text-secondary);
    background: linear-gradient(135deg, rgba(196, 30, 58, 0.04), rgba(248, 198, 0, 0.04));
    padding: 24px;
    border-left: 4px solid var(--isu-red);
    border-radius: 8px;
    margin: 28px 0 45px 0;
  }

  .lesson-content h2 {
    font-size: 1.8em;
    font-weight: 700;
    color: var(--isu-red);
    margin: 45px 0 28px 0;
    letter-spacing: -0.5px;
  }

  .lesson-content > p {
    font-size: 1.05em;
    line-height: 1.8;
    color: var(--text-primary);
    margin: 20px 0;
  }

  /* Rules Timeline */
  .rules-timeline {
    margin: 40px 0 60px 0;
    position: relative;
  }

  .rules-timeline::before {
    content: '';
    position: absolute;
    left: 35px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, var(--isu-red) 0%, var(--isu-gold) 100%);
  }

  .rule-item {
    display: grid;
    grid-template-columns: 80px 1fr;
    gap: 32px;
    align-items: flex-start;
    margin-bottom: 28px;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    text-align: left;
    transition: all 0.3s ease;
  }

  .rule-item:hover {
    transform: translateX(8px);
  }

  .rule-marker {
    position: relative;
    display: flex;
    justify-content: center;
  }

  .rule-num {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 70px;
    height: 70px;
    background: linear-gradient(135deg, #c41e3a, #a01729);
    color: white;
    font-size: 1.8em;
    font-weight: 700;
    border-radius: 50%;
    z-index: 2;
    box-shadow: 0 4px 12px rgba(196, 30, 58, 0.3);
    transition: all 0.3s ease;
  }

  .rule-item:hover .rule-num {
    transform: scale(1.1);
    box-shadow: 0 8px 24px rgba(196, 30, 58, 0.4);
  }

  .rule-content {
    padding: 24px 28px;
    background: white;
    border-left: 4px solid var(--isu-red);
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
  }

  .rule-item:hover .rule-content {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    border-left-color: var(--isu-gold);
  }

  .rule-content h3 {
    font-size: 1.25em;
    font-weight: 700;
    color: var(--isu-red);
    margin: 0 0 12px 0;
    letter-spacing: -0.3px;
  }

  .rule-description {
    margin: 0;
    font-size: 1.05em;
    line-height: 1.6;
    color: var(--text-primary);
  }

  .rule-details {
    margin: 0;
  }

  .rule-details ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .rule-details li {
    font-size: 1.05em;
    line-height: 1.6;
    color: var(--text-primary);
    margin: 10px 0;
    padding-left: 24px;
    position: relative;
  }

  .rule-details li:first-child {
    margin-top: 0;
  }

  .rule-details li:last-child {
    margin-bottom: 0;
  }

  .rule-details li::before {
    content: '•';
    position: absolute;
    left: 4px;
    color: var(--isu-red);
    font-weight: bold;
    font-size: 1.3em;
  }

  /* Image */
  .lesson-content img {
    max-width: 900px !important;
    height: auto !important;
    display: block !important;
    margin: 50px auto 50px auto !important;
    border-radius: 12px;
    box-shadow: 0 16px 48px rgba(0, 0, 0, 0.12);
    border: 1px solid var(--border-color);
  }

  /* Airspace Info */
  .airspace-info {
    background: white;
    border: 2px solid var(--isu-red);
    padding: 28px;
    border-radius: 10px;
    margin: 28px 0 40px 0;
  }

  .airspace-info p {
    font-size: 1.08em;
    line-height: 1.8;
    color: var(--text-primary);
    margin: 0;
  }

  .airspace-info strong {
    color: var(--isu-red);
    font-weight: 700;
  }

  /* Learning Activities */
  .activities-list {
    list-style: none;
    padding: 0;
    margin: 24px 0;
  }

  .activities-list li {
    font-size: 1.05em;
    line-height: 1.8;
    color: var(--text-primary);
    margin: 14px 0;
    padding-left: 24px;
    position: relative;
  }

  .activities-list li::before {
    content: '→';
    position: absolute;
    left: 0;
    color: var(--isu-red);
    font-weight: bold;
    font-size: 1.2em;
  }

  .activities-list a {
    color: var(--isu-red);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
  }

  /* Tab Buttons */
  .tab-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .tab-btn {
    padding: 12px 20px;
    background: #f5f5f5;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s;
    text-decoration: none;
    color: var(--text-primary);
    font-size: 0.95em;
  }

  .tab-btn:hover {
    background: #e8e8e8;
  }

  .tab-btn.active {
    background: var(--isu-red);
    color: white;
  }

  .page-header-bar {
    display: none;
  }

  @media (max-width: 768px) {
    .lesson-content h2 {
      font-size: 1.5em;
      margin: 35px 0 24px 0;
    }

    .rules-timeline::before {
      left: 24px;
    }

    .rule-item {
      grid-template-columns: 60px 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }

    .rule-num {
      width: 60px;
      height: 60px;
      font-size: 1.5em;
    }

    .rule-content {
      padding: 18px 20px;
    }

    .rule-content h3 {
      font-size: 1.1em;
      margin-bottom: 10px;
    }

    .rule-description,
    .rule-details li {
      font-size: 0.95em;
    }

    .lesson-content img {
      max-width: 100% !important;
      margin: 40px auto 40px auto !important;
    }

    .airspace-info {
      padding: 20px;
    }

    .airspace-info p {
      font-size: 1em;
    }

    .page-header-bar {
      display: block;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--isu-gold);
    }

    .tab-buttons {
      flex-direction: column;
    }

    div[style*="grid-template-columns"] {
      display: flex !important;
      flex-direction: column-reverse !important;
      gap: 16px !important;
    }
  }
</style>